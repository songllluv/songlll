<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <meta name="renderer" content="webkit" />
  <meta name="force-rendering" content="webkit" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <!-- MDUI CSS -->
  <link rel="stylesheet" type="text/css" href="..\web.css">
  <title>Fold Craft Launcher</title>
  <link rel="shortcut icon" href="https://fcl-team.github.io/img/head/img_app.png">
  <!--SEO Optimize-->
  <meta name="keywords" content="FCL" />
  <meta name="description" content="Fold Craft Launcher" />
  <meta name="author" content="FCL-Team" />
</head>

<!--Theme-->

<body class="mdui-drawer-body-left mdui-appbar-with-toolbar mdui-theme-primary-light-green">
  <!--banner-->

  <div class="mdui-container" id="version_list"></div>

  <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <div class="bg" style="text-align: center;">
    <h1>线路</h1>
    <select id="line" style="height: 60px; font-size:25px;border-radius: 10px;">
      <option value="">官方</option>
      <option value="https://gh.llkk.cc/">gh.llkk.cc</option>
      <option value="https://github.moeyy.xyz/">github.moeyy.xyz</option>
      <option value="https://ghproxy.cn/">ghproxy.cn</option>
      <option value="https://ghproxy.net/">ghproxy.net</option>
      <option value="https://gitproxy.click/">gitproxy.click</option>
    </select>
    <button type="button" onclick="run()"
      style="color: cadetblue; background-color: black;font-size:25px; border-radius: 10px; width: 100px; height: 60px;">下载</button>
  </div>
  <script>
    function d(a) {
      var b=a;
      if(a==''){
          a="https://raw.githubusercontent.com/FCL-Team/FoldCraftLauncher/main/version_map.json";
      }
      else{
        a+= "https://github.com/FCL-Team/FoldCraftLauncher/raw/refs/heads/main/version_map.json";
      }
      $.ajax({
        type: "get",
        url: a,
        dataType: "html",
        timeout: 1000,
        success: function (res) {
          alert("已成功");
          var jsonStr = res;
          var jsonObj = JSON.parse(jsonStr);
          var html_text = "";
          for (let i = 0; i < jsonObj.length; i++) {
            var obj = jsonObj[i];
            var t1 = obj.url;
            var t = t1.substring(0, t1.length);
            html_text = t;
            if(b!="")html_text=b+html_text;
          }
          window.open(html_text);
        },
        error: function () {
          alert(a);
          alert("下载链接获取失败，请切换线路。");
        }

      })
    }
    function run() {
      d(document.getElementById("line").value);

    }
  </script>

</body>