<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŒ–å­¦å¼åˆ†ç±»æŒ‘æˆ˜ - åˆä¸­åŒ–å­¦</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNjQwIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDcuMS4wIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjUgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTE4NC42IDQ3NS41QzE4MS41IDQ4Mi44IDE3OS4yIDQ5MC40IDE3Ny44IDQ5OC4xQzE2My4zIDUwNi45IDE0Ni4zIDUxMiAxMjggNTEyQzc1IDUxMiAzMiA0NjkgMzIgNDE2TDMyIDEyOEMxNC4zIDEyOCAwIDExMy43IDAgOTZDMCA3OC4zIDE0LjMgNjQgMzIgNjRMMjI0IDY0QzI0MS43IDY0IDI1NiA3OC4zIDI1NiA5NkMyNTYgMTEzLjcgMjQxLjcgMTI4IDIyNCAxMjhMMjI0IDM4My42TDE4NC42IDQ3NS41ek05NiAxMjhMOTYgMjU2TDE2MCAyNTZMMTYwIDEyOEw5NiAxMjh6TTM1MiA2NEw1MTIgNjRDNTI5LjcgNjQgNTQ0IDc4LjMgNTQ0IDk2QzU0NCAxMTMuNyA1MjkuNyAxMjggNTEyIDEyOEw1MTIgMjgxLjRMNjAzLjMgNDk0LjRDNjA1LjYgNDk5LjggNjA3LjEgNTA1LjUgNjA3LjcgNTExLjRMNjA4IDUxMkw2MDcuNyA1MTJDNjA3LjkgNTEzLjggNjA4IDUxNS42IDYwOCA1MTcuNEM2MDggNTQ5LjcgNTgxLjggNTc2IDU0OS40IDU3NkwyODIuNSA1NzZDMjUwLjIgNTc2IDIyMy45IDU0OS44IDIyMy45IDUxNy40QzIyMy45IDUxNS42IDIyNCA1MTMuOCAyMjQuMiA1MTJMMjIzLjkgNTEyTDIyNC4yIDUxMS40QzIyNC44IDUwNS42IDIyNi4zIDQ5OS44IDIyOC42IDQ5NC40TDMyMCAyODEuNEwzMjAgMTI4QzMwMi4zIDEyOCAyODggMTEzLjcgMjg4IDk2QzI4OCA3OC4zIDMwMi4zIDY0IDMyMCA2NEwzNTIgNjR6TTQ1My4yIDMwNi42QzQ0OS44IDI5OC42IDQ0OCAyOTAuMSA0NDggMjgxLjRMNDQ4IDEyOEwzODQgMTI4TDM4NCAyODEuNEMzODQgMjkwLjEgMzgyLjIgMjk4LjYgMzc4LjggMzA2LjZMMzQ1LjYgMzg0TDQ4Ni4zIDM4NEw0NTMuMSAzMDYuNnoiLz48L3N2Zz4=">
    <style>
        * {
            -webkit-user-drag: none; /* Chrome, Safari */
            -moz-user-drag: none; /* Firefox */
            -ms-user-drag: none; /* Internet Explorer */
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 25px;
            padding: 25px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 18px;
            box-shadow: 0 8px 25px rgba(98, 141, 228, 0.12);
            border: 1px solid rgba(98, 141, 228, 0.1);
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            background: linear-gradient(to right, #4a90e2, #63b3ed);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.8;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
            color: #5a6c7d;
        }
        
        .teacher-info {
            background: rgba(74, 144, 226, 0.08);
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            display: inline-block;
            border-left: 4px solid #4a90e2;
            color: #4a90e2;
        }
        
        .game-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding: 20px 30px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(98, 141, 228, 0.1);
            border: 1px solid rgba(98, 141, 228, 0.1);
        }
        
        .timer-container {
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 1.3rem;
            color: #5a6c7d;
        }
        
        .timer {
            font-size: 2.5rem;
            font-weight: bold;
            color: #4a90e2;
            text-shadow: 0 2px 4px rgba(74, 144, 226, 0.2);
            background: rgba(255, 255, 255, 0.8);
            padding: 12px 28px;
            border-radius: 12px;
            min-width: 140px;
            text-align: center;
            border: 2px solid rgba(74, 144, 226, 0.2);
        }
        
        .stats {
            display: flex;
            gap: 20px;
        }
        
        .stat-box {
            background: rgba(255, 255, 255, 0.9);
            padding: 12px 22px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid rgba(98, 141, 228, 0.15);
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.05);
        }
        
        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            margin-top: 5px;
        }
        
        .remaining {
            color: #4a90e2;
        }
        
        .correct {
            color: #38a169;
        }
        
        .incorrect {
            color: #e53e3e;
        }
        
        .game-controls {
            display: flex;
            gap: 15px;
        }
        
        .btn {
            padding: 14px 28px;
            font-size: 1.1rem;
            font-weight: 600;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
        }
        
        .btn-start {
            background: linear-gradient(145deg, #38a169, #2f855a);
            color: white;
        }
        
        .btn-reset {
            background: linear-gradient(145deg, #4a90e2, #357abd);
            color: white;
        }

        .btn-clean {
            background: linear-gradient(145deg, #e53e3e, #c53030);
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }
        
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .categories-area {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 18px;
            margin-bottom: 35px;
            min-height: 160px;
        }
        
        .category {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 22px 15px;
            text-align: center;
            border: 2px dashed rgba(98, 141, 228, 0.3);
            transition: all 0.3s ease;
            min-height: 130px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            box-shadow: 0 5px 12px rgba(0, 0, 0, 0.05);
        }
        
        .category.drag-over {
            border-color: #f6ad55;
            background: rgba(246, 173, 85, 0.08);
            transform: scale(1.03);
            box-shadow: 0 8px 20px rgba(246, 173, 85, 0.15);
        }
        
        .category.correct-drop {
            border-color: #38a169;
            background: rgba(56, 161, 105, 0.08);
        }
        
        .category-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 8px;
            color: #4a90e2;
        }
        
        .category-count {
            font-size: 0.9rem;
            color: #718096;
            margin-bottom: 5px;
        }
        
        .category-examples {
            font-size: 0.85rem;
            color: #a0aec0;
            margin-top: 5px;
        }
        
        .formula-area-container {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 18px;
            padding: 30px;
            margin-bottom: 35px;
            box-shadow: 0 8px 25px rgba(98, 141, 228, 0.1);
            border: 1px solid rgba(98, 141, 228, 0.1);
            position: relative;
            overflow: hidden;
            min-height: 450px;
        }
        
        .formula-area-title {
            font-size: 1.4rem;
            font-weight: bold;
            color: #4a90e2;
            margin-bottom: 20px;
            text-align: center;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(74, 144, 226, 0.1);
        }
        
        .formula-area {
            min-height: 380px;
            position: relative;
            border-radius: 12px;
            background: rgba(245, 247, 250, 0.7);
            padding: 15px;
            overflow: hidden;
        }
        
        .formula-card {
            background: linear-gradient(145deg, #63b3ed, #4a90e2);
            transition: transform 0.3s ease, box-shadow 0.3s ease, background 0.3s ease;
            border-radius: 12px;
            padding: 20px 15px;
            font-size: 1.4rem;
            font-weight: bold;
            cursor: grab;
            user-select: none;
            box-shadow: 0 5px 12px rgba(74, 144, 226, 0.2);
            text-align: center;
            min-width: 130px;
            position: absolute;
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .formula-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 18px rgba(74, 144, 226, 0.3);
            background: linear-gradient(145deg, #7bc1f5, #5a9be6);
        }
        
        .formula-card.dragging {
            opacity: 0.9;
            transform: scale(1.05);
            box-shadow: 0 0 25px rgba(74, 144, 226, 0.5);
            z-index: 1000;
        }
        
        .formula-card.correct {
            animation: correctAnimation 0.6s ease forwards;
        }
        
        .formula-card.incorrect {
            animation: incorrectAnimation 0.5s ease;
        }
        
        @keyframes correctAnimation {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.15); opacity: 0.8; background: linear-gradient(145deg, #38a169, #2f855a); }
            100% { transform: scale(0); opacity: 0; }
        }
        
        @keyframes incorrectAnimation {
            0% { transform: translateX(0); }
            25% { transform: translateX(-12px); background: linear-gradient(145deg, #e53e3e, #d32f2f); }
            50% { transform: translateX(12px); }
            75% { transform: translateX(-12px); }
            100% { transform: translateX(0); }
        }
        
        .game-message {
            text-align: center;
            font-size: 1.5rem;
            margin-top: 20px;
            padding: 18px;
            border-radius: 12px;
            display: none;
            font-weight: 600;
        }
        
        .message-correct {
            background: rgba(56, 161, 105, 0.12);
            color: #2f855a;
            border: 2px solid #38a169;
            display: block;
        }
        
        .message-incorrect {
            background: rgba(229, 62, 62, 0.12);
            color: #c53030;
            border: 2px solid #e53e3e;
            display: block;
        }
        
        .game-result {
            text-align: center;
            font-size: 1.8rem;
            font-weight: bold;
            margin-top: 25px;
            padding: 25px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            color: #4a90e2;
            display: none;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(74, 144, 226, 0.2);
        }
        
        .ranking {
            margin-top: 30px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 18px;
            padding: 25px;
            display: none;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(74, 144, 226, 0.1);
        }
        
        .ranking h3 {
            color: #4a90e2;
            margin-bottom: 20px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(74, 144, 226, 0.1);
        }
        
        .ranking-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .ranking-table th {
            background: rgba(74, 144, 226, 0.1);
            padding: 14px;
            text-align: left;
            border-bottom: 2px solid rgba(74, 144, 226, 0.2);
            color: #4a90e2;
            font-weight: 600;
        }
        
        .ranking-table td {
            padding: 14px;
            border-bottom: 1px solid rgba(74, 144, 226, 0.1);
            color: #4a5568;
        }
        
        .ranking-table tr:nth-child(even) {
            background: rgba(74, 144, 226, 0.04);
        }
        
        .ranking-table tr:hover {
            background: rgba(74, 144, 226, 0.08);
        }
        
        .rank-1 {
            color: #d69e2e;
            font-weight: bold;
        }
        
        .rank-2 {
            color: #718096;
        }
        
        .rank-3 {
            color: #ed8936;
        }
        
        .instructions {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 18px;
            padding: 25px;
            margin-top: 30px;
            line-height: 1.6;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(74, 144, 226, 0.1);
        }
        
        .instructions h3 {
            color: #4a90e2;
            margin-bottom: 15px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(74, 144, 226, 0.1);
        }
        
        .instructions ul {
            padding-left: 22px;
            margin-bottom: 20px;
        }
        
        .instructions li {
            margin-bottom: 10px;
            color: #4a5568;
        }
        
        .highlight {
            color: #4a90e2;
            font-weight: 600;
        }
        
        .special-note {
            background: rgba(246, 173, 85, 0.1);
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            border-left: 4px solid #f6ad55;
            color: #d69e2e;
        }
        
        footer {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            color: #718096;
            font-size: 0.9rem;
            border-top: 1px solid rgba(74, 144, 226, 0.1);
        }
        
        @media (max-width: 1200px) {
            .categories-area {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .categories-area {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .game-info {
                flex-direction: column;
                gap: 20px;
            }
            
            .stats {
                width: 100%;
                justify-content: space-around;
            }
            
            h1 {
                font-size: 2.3rem;
            }
            
            .formula-card {
                font-size: 1.3rem;
                min-width: 110px;
                padding: 18px 12px;
            }
        }
        
        @media (max-width: 576px) {
            .categories-area {
                grid-template-columns: 1fr;
            }
            
            .formula-card {
                font-size: 1.2rem;
                min-width: 100px;
                padding: 16px 10px;
            }
            
            .game-controls {
                flex-direction: column;
                width: 100%;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-flask"></i> åŒ–å­¦å¼åˆ†ç±»æŒ‘æˆ˜</h1>
            <p class="subtitle">å°†åŒ–å­¦å¼å¡ç‰‡æ‹–åŠ¨åˆ°æ­£ç¡®çš„ç‰©è´¨ç±»åˆ«ä¸­ï¼Œå­¦ä¹ åŒ–å­¦ç‰©è´¨çš„åˆ†ç±»çŸ¥è¯†ï¼</p>
            <div class="teacher-info">
                <i class="fas fa-chalkboard-teacher"></i> æ•™å­¦æç¤ºï¼šé€šè¿‡åˆ†ç±»æ¸¸æˆå¸®åŠ©å­¦ç”ŸæŒæ¡å•è´¨ã€æ°§åŒ–ç‰©ã€é…¸ã€ç¢±ã€ç›ã€æœ‰æœºç‰©çš„åŒºåˆ«ã€‚
            </div>
        </header>
        
        <div class="game-info">
            <div class="timer-container">
                <i class="fas fa-clock" style="color: #4a90e2;"></i>
                <div class="timer" id="timer">00:00</div>
            </div>
            
            <div class="stats">
                <div class="stat-box">
                    <div>å‰©ä½™å¡ç‰‡</div>
                    <div class="stat-value remaining" id="remaining-count">30</div>
                </div>
                <div class="stat-box">
                    <div>æ­£ç¡®</div>
                    <div class="stat-value correct" id="correct-count">0</div>
                </div>
                <div class="stat-box">
                    <div>é”™è¯¯</div>
                    <div class="stat-value incorrect" id="incorrect-count">0</div>
                </div>
            </div>
            
            <div class="game-controls">
                <button class="btn btn-start" id="start-btn">
                    <i class="fas fa-play"></i> å¼€å§‹æ¸¸æˆ
                </button>
                <button class="btn btn-reset" id="reset-btn">
                    <i class="fas fa-redo"></i> é‡æ–°å¼€å§‹
                </button>
                <button class="btn btn-clean" id="clean-btn">
                    <i class="fas fa-trash-alt"></i>
                    æ¸…é™¤æ’è¡Œæ¦œ
                </button>
            </div>
        </div>
        
        <!-- ç±»åˆ«åŒºåŸŸ -->
        <div class="categories-area" id="categories-area">
            <div class="category" data-category="å•è´¨" id="category-å•è´¨">
                <div class="category-title">å•è´¨</div>
                <div class="category-count" id="count-å•è´¨">0/3</div>
                <div class="category-examples">P, Oâ‚‚, Hâ‚‚</div>
            </div>
            <div class="category" data-category="æ°§åŒ–ç‰©" id="category-æ°§åŒ–ç‰©">
                <div class="category-title">æ°§åŒ–ç‰©</div>
                <div class="category-count" id="count-æ°§åŒ–ç‰©">0/8</div>
                <div class="category-examples">Feâ‚‚Oâ‚ƒ, CaO, COâ‚‚</div>
            </div>
            <div class="category" data-category="é…¸" id="category-é…¸">
                <div class="category-title">é…¸</div>
                <div class="category-count" id="count-é…¸">0/7</div>
                <div class="category-examples">HNOâ‚ƒ, Hâ‚‚SOâ‚„, HCl</div>
            </div>
            <div class="category" data-category="ç¢±" id="category-ç¢±">
                <div class="category-title">ç¢±</div>
                <div class="category-count" id="count-ç¢±">0/3</div>
                <div class="category-examples">Fe(OH)â‚‚, Al(OH)â‚ƒ</div>
            </div>
            <div class="category" data-category="ç›" id="category-ç›">
                <div class="category-title">ç›</div>
                <div class="category-count" id="count-ç›">0/8</div>
                <div class="category-examples">NaCl, CaCOâ‚ƒ, CuSOâ‚„</div>
            </div>
            <div class="category" data-category="æœ‰æœºç‰©" id="category-æœ‰æœºç‰©">
                <div class="category-title">æœ‰æœºç‰©</div>
                <div class="category-count" id="count-æœ‰æœºç‰©">0/5</div>
                <div class="category-examples">CHâ‚„, Câ‚†Hâ‚â‚‚Oâ‚†</div>
            </div>
        </div>
        
        <!-- åŒ–å­¦å¼å¡ç‰‡åŒºåŸŸ -->
        <div class="formula-area-container">
            <div class="formula-area-title">å°†åŒ–å­¦å¼æ‹–åŠ¨åˆ°ä¸Šæ–¹å¯¹åº”ç±»åˆ«ä¸­</div>
            <div class="formula-area" id="formula-area">
                <div class="formula-grid" id="formula-grid">
                    <!-- åŒ–å­¦å¼å¡ç‰‡å°†é€šè¿‡JSç”Ÿæˆ -->
                </div>
            </div>
        </div>
        
        <div class="game-message" id="game-message"></div>
        
        <div class="game-result" id="game-result"></div>
        
        <div class="ranking" id="ranking">
            <h3><i class="fas fa-trophy"></i> æ’è¡Œæ¦œ</h3>
            <table class="ranking-table">
                <thead>
                    <tr>
                        <th>æ’å</th>
                        <th>ç”¨æ—¶</th>
                        <th>æ­£ç¡®æ•°</th>
                        <th>é”™è¯¯æ•°</th>
                        <th>æ—¥æœŸ</th>
                    </tr>
                </thead>
                <tbody id="ranking-body">
                    <!-- æ’è¡Œæ¦œæ•°æ®å°†é€šè¿‡JSç”Ÿæˆ -->
                </tbody>
            </table>
        </div>
        
        <div class="instructions">
            <h3><i class="fas fa-info-circle"></i> æ¸¸æˆè§„åˆ™</h3>
            <ul>
                <li><span class="highlight">æ“ä½œæ–¹å¼</span>ï¼šå°†ä¸‹æ–¹çš„åŒ–å­¦å¼å¡ç‰‡æ‹–åŠ¨åˆ°ä¸Šæ–¹çš„å¯¹åº”ç±»åˆ«åŒºåŸŸä¸­</li>
                <li><span class="highlight">åˆ†ç±»è§„åˆ™</span>ï¼š
                    <ul>
                        <li><strong>å•è´¨</strong>ï¼šç”±åŒç§å…ƒç´ ç»„æˆçš„çº¯å‡€ç‰©ï¼ˆå¦‚Pã€Oâ‚‚ã€Hâ‚‚ï¼‰</li>
                        <li><strong>æ°§åŒ–ç‰©</strong>ï¼šç”±ä¸¤ç§å…ƒç´ ç»„æˆï¼Œå…¶ä¸­ä¸€ç§æ˜¯æ°§å…ƒç´ çš„åŒ–åˆç‰©ï¼ˆå¦‚Feâ‚‚Oâ‚ƒã€COâ‚‚ï¼‰</li>
                        <li><strong>é…¸</strong>ï¼šç”µç¦»æ—¶äº§ç”Ÿçš„é˜³ç¦»å­å…¨éƒ¨æ˜¯æ°¢ç¦»å­çš„åŒ–åˆç‰©ï¼ˆå¦‚HNOâ‚ƒã€HClã€CHâ‚ƒCOOHï¼‰</li>
                        <li><strong>ç¢±</strong>ï¼šç”µç¦»æ—¶äº§ç”Ÿçš„é˜´ç¦»å­å…¨éƒ¨æ˜¯æ°¢æ°§æ ¹ç¦»å­çš„åŒ–åˆç‰©ï¼ˆå¦‚Fe(OH)â‚‚ã€Ca(OH)â‚‚ï¼‰</li>
                        <li><strong>ç›</strong>ï¼šç”±é‡‘å±ç¦»å­ï¼ˆæˆ–é“µæ ¹ç¦»å­ï¼‰å’Œé…¸æ ¹ç¦»å­ç»„æˆçš„åŒ–åˆç‰©ï¼ˆå¦‚NaClã€CaCOâ‚ƒï¼‰</li>
                        <li><strong>æœ‰æœºç‰©</strong>ï¼šå«ç¢³å…ƒç´ çš„åŒ–åˆç‰©ï¼ˆé™¤COã€COâ‚‚ã€ç¢³é…¸ç›ç­‰å¤–ï¼‰ï¼ˆå¦‚CHâ‚„ã€Câ‚†Hâ‚â‚‚Oâ‚†ï¼‰</li>
                    </ul>
                </li>
                <div class="special-note">
                    <i class="fas fa-lightbulb"></i> <strong>ç‰¹åˆ«æ³¨æ„</strong>ï¼šæœ‰äº›ç‰©è´¨å¯èƒ½å±äºå¤šä¸ªç±»åˆ«ï¼ä¾‹å¦‚ï¼ŒCHâ‚ƒCOOHï¼ˆä¹™é…¸ï¼‰æ—¢å±äºé…¸åˆå±äºæœ‰æœºç‰©ã€‚åœ¨æ¸¸æˆä¸­ï¼Œè¿™ç§ç‰©è´¨å¯ä»¥æ‹–åŠ¨åˆ°ä»»æ„ä¸€ä¸ªæ­£ç¡®ç±»åˆ«ä¸­ã€‚
                </div>
                <li><span class="highlight">æ¸¸æˆè®¡æ—¶</span>ï¼šä»å¼€å§‹æ¸¸æˆåˆ°å…¨éƒ¨åˆ†ç±»å®Œæˆçš„æ—¶é—´</li>
                <li>æ ¹æ®ç”¨æ—¶é•¿çŸ­è¿›è¡Œæ’åï¼Œç”¨æ—¶è¶ŠçŸ­æ’åè¶Šé«˜</li>
                <li>å…¨éƒ¨å¡ç‰‡åˆ†ç±»å®Œæˆåï¼Œä¼šæ˜¾ç¤ºæœ¬æ¬¡æ¸¸æˆç”¨æ—¶å’Œæ’è¡Œæ¦œ</li>
                <li>æ‹–åŠ¨åˆ°é”™è¯¯ä½ç½®ä¼šæ˜¾ç¤º"é”™è¯¯"æç¤ºï¼Œå¡ç‰‡ä¼šè¿”å›åŸå¤„</li>
            </ul>
        </div>
        
        <footer>
            <p>åˆä¸­åŒ–å­¦å¼åˆ†ç±»æŒ‘æˆ˜ | è®¾è®¡ç”¨äºåŒ–å­¦è¯¾å ‚æ•™å­¦è¾…åŠ© | æ¸…æ–°æ·¡é›…é£æ ¼</p>
        </footer>
    </div>

    <script>
        // åŒ–å­¦å¼æ•°æ® - æ¯ä¸ªåŒ–å­¦å¼åŠå…¶æ­£ç¡®ç±»åˆ«
        // æ³¨æ„ï¼šCH3COOHå¯ä»¥åŒæ—¶å±äº"é…¸"å’Œ"æœ‰æœºç‰©"
        const chemicals = [
            // å•è´¨
            { formula: "P", categories: ["å•è´¨"], display: "P" },
            { formula: "O2", categories: ["å•è´¨"], display: "Oâ‚‚" },
            { formula: "H2", categories: ["å•è´¨"], display: "Hâ‚‚" },
            
            // æ°§åŒ–ç‰©
            { formula: "Fe2O3", categories: ["æ°§åŒ–ç‰©"], display: "Feâ‚‚Oâ‚ƒ" },
            { formula: "CaO", categories: ["æ°§åŒ–ç‰©"], display: "CaO" },
            { formula: "FeO", categories: ["æ°§åŒ–ç‰©"], display: "FeO" },
            { formula: "CO2", categories: ["æ°§åŒ–ç‰©"], display: "COâ‚‚" },
            { formula: "MnO2", categories: ["æ°§åŒ–ç‰©"], display: "MnOâ‚‚" },
            { formula: "P2O5", categories: ["æ°§åŒ–ç‰©"], display: "Pâ‚‚Oâ‚…" },
            { formula: "Fe3O4", categories: ["æ°§åŒ–ç‰©"], display: "Feâ‚ƒOâ‚„" },
            
            // é…¸ï¼ˆæ³¨æ„ï¼šCH3COOHåŒæ—¶å±äºé…¸å’Œæœ‰æœºç‰©ï¼‰
            { formula: "HNO3", categories: ["é…¸"], display: "HNOâ‚ƒ" },
            { formula: "H2SO4", categories: ["é…¸"], display: "Hâ‚‚SOâ‚„" },
            { formula: "H2CO3", categories: ["é…¸"], display: "Hâ‚‚COâ‚ƒ" },
            { formula: "HCl", categories: ["é…¸"], display: "HCl" },
            { formula: "H3PO4", categories: ["é…¸"], display: "Hâ‚ƒPOâ‚„" },
            { formula: "CH3COOH", categories: ["é…¸", "æœ‰æœºç‰©"], display: "CHâ‚ƒCOOH" },
            
            // ç¢±
            { formula: "Fe(OH)2", categories: ["ç¢±"], display: "Fe(OH)â‚‚" },
            { formula: "Al(OH)3", categories: ["ç¢±"], display: "Al(OH)â‚ƒ" },
            { formula: "Ca(OH)2", categories: ["ç¢±"], display: "Ca(OH)â‚‚" },
            
            // ç›
            { formula: "(NH4)2SO4", categories: ["ç›"], display: "(NHâ‚„)â‚‚SOâ‚„" },
            { formula: "Al2(SO4)3", categories: ["ç›"], display: "Alâ‚‚(SOâ‚„)â‚ƒ" },
            { formula: "Na2SO4", categories: ["ç›"], display: "Naâ‚‚SOâ‚„" },
            { formula: "NH4NO3", categories: ["ç›"], display: "NHâ‚„NOâ‚ƒ" },
            { formula: "CaCO3", categories: ["ç›"], display: "CaCOâ‚ƒ" },
            { formula: "CuSO4", categories: ["ç›"], display: "CuSOâ‚„" },
            { formula: "NaCl", categories: ["ç›"], display: "NaCl" },
            { formula: "CuCl2", categories: ["ç›"], display: "CuClâ‚‚" },
            
            // æœ‰æœºç‰©ï¼ˆæ³¨æ„ï¼šCH3COOHåŒæ—¶å±äºé…¸å’Œæœ‰æœºç‰©ï¼‰
            { formula: "CH4", categories: ["æœ‰æœºç‰©"], display: "CHâ‚„" },
            { formula: "CH3CH2OH", categories: ["æœ‰æœºç‰©"], display: "CHâ‚ƒCHâ‚‚OH" },
            { formula: "C6H12O6", categories: ["æœ‰æœºç‰©"], display: "Câ‚†Hâ‚â‚‚Oâ‚†" }
        ];
        
        // æ¯ä¸ªç±»åˆ«çš„æ­£ç¡®æ•°é‡
        // æ³¨æ„ï¼šç”±äºCH3COOHå±äºä¸¤ä¸ªç±»åˆ«ï¼Œæ‰€ä»¥é…¸æœ‰7ä¸ªï¼Œæœ‰æœºç‰©æœ‰5ä¸ª
        const categoryCounts = {
            "å•è´¨": 3,
            "æ°§åŒ–ç‰©": 8,
            "é…¸": 7,
            "ç¢±": 3,
            "ç›": 8,
            "æœ‰æœºç‰©": 5
        };
        
        // æ¸¸æˆçŠ¶æ€
        const gameState = {
            remaining: chemicals.length,
            correct: 0,
            incorrect: 0,
            gameActive: false,
            startTime: 0,
            elapsedTime: 0,
            timerInterval: null,
            draggedCard: null,
            placedCards: {} // è®°å½•å·²æ”¾ç½®çš„å¡ç‰‡ï¼Œé˜²æ­¢é‡å¤è®¡æ•°
        };
        
        // æ’è¡Œæ¦œæ•°æ®
        let rankingData = JSON.parse(localStorage.getItem('chemicalClassificationRanking')) || [];
        
        // DOMå…ƒç´ 
        const startBtn = document.getElementById('start-btn');
        const resetBtn = document.getElementById('reset-btn');
        const cleanBtn = document.getElementById('clean-btn');
        const timerElement = document.getElementById('timer');
        const remainingElement = document.getElementById('remaining-count');
        const correctElement = document.getElementById('correct-count');
        const incorrectElement = document.getElementById('incorrect-count');
        const gameMessageElement = document.getElementById('game-message');
        const gameResultElement = document.getElementById('game-result');
        const rankingElement = document.getElementById('ranking');
        const rankingBodyElement = document.getElementById('ranking-body');
        const formulaArea = document.getElementById('formula-area');
        
        
        displayRanking();

        // åˆå§‹åŒ–æ¸¸æˆ
        function initGame() {
            // é‡ç½®æ¸¸æˆçŠ¶æ€
            gameState.remaining = chemicals.length;
            gameState.correct = 0;
            gameState.incorrect = 0;
            gameState.gameActive = false;
            gameState.startTime = 0;
            gameState.elapsedTime = 0;
            gameState.placedCards = {};
            
            // æ¸…é™¤è®¡æ—¶å™¨
            if (gameState.timerInterval) {
                clearInterval(gameState.timerInterval);
                gameState.timerInterval = null;
            }
            
            // åˆ›å»ºåŒ–å­¦å¼å¡ç‰‡
            createFormulaCards();
            
            // é‡ç½®ç±»åˆ«åŒºåŸŸ
            resetCategories();
            
            // æ›´æ–°æ˜¾ç¤º
            updateDisplay();
            
            // é‡ç½®æ¸¸æˆç»“æœå’Œæ’è¡Œæ¦œæ˜¾ç¤º
            gameResultElement.style.display = 'none';
            gameResultElement.textContent = '';
            
            // æ¸…ç©ºæ¸¸æˆæ¶ˆæ¯
            gameMessageElement.textContent = '';
            gameMessageElement.className = 'game-message';
            
            // å¯ç”¨å¼€å§‹æŒ‰é’®
            startBtn.disabled = false;
            
            // æ›´æ–°è®¡æ—¶å™¨æ˜¾ç¤º
            updateTimerDisplay();
        }
        
        // åˆ›å»ºåŒ–å­¦å¼å¡ç‰‡
        function createFormulaCards() {
            const formulaGrid = document.getElementById('formula-grid');
            formulaGrid.innerHTML = '';
            
            // æ‰“ä¹±åŒ–å­¦å¼é¡ºåº
            const shuffledChemicals = [...chemicals].sort(() => Math.random() - 0.5);
            
            // è·å–å…¬å¼åŒºåŸŸçš„å°ºå¯¸
            const areaRect = formulaArea.getBoundingClientRect();
            const areaWidth = areaRect.width - 150; // å‡å»å¡ç‰‡å®½åº¦
            const areaHeight = areaRect.height - 100; // å‡å»å¡ç‰‡é«˜åº¦
            
            // ä¸ºæ¯ä¸ªåŒ–å­¦å¼åˆ›å»ºå¡ç‰‡
            shuffledChemicals.forEach((chemical, index) => {
                const card = document.createElement('div');
                card.className = 'formula-card';
                card.id = `card-${chemical.formula}`;
                card.textContent = chemical.display;
                card.draggable = false; // åˆå§‹ä¸å¯æ‹–åŠ¨
                card.dataset.formula = chemical.formula;
                card.dataset.categories = JSON.stringify(chemical.categories);
                
                // éšæœºä½ç½®ï¼ˆç¡®ä¿åœ¨åŒºåŸŸå†…ï¼‰
                const randomLeft = Math.random() * areaWidth;
                const randomTop = Math.random() * areaHeight;
                
                card.style.left = `${randomLeft}px`;
                card.style.top = `${randomTop}px`;
                
                // æ·»åŠ æ‹–åŠ¨äº‹ä»¶
                addDragEvents(card);
                
                formulaGrid.appendChild(card);
            });
        }
        
        // é‡ç½®ç±»åˆ«åŒºåŸŸ
        function resetCategories() {
            // é‡ç½®æ‰€æœ‰ç±»åˆ«è®¡æ•°æ˜¾ç¤º
            Object.keys(categoryCounts).forEach(category => {
                document.getElementById(`count-${category}`).textContent = `0/${categoryCounts[category]}`;
            });
            
            // ç§»é™¤æ‰€æœ‰ç±»åˆ«çš„ç‰¹æ®Šæ ·å¼
            document.querySelectorAll('.category').forEach(category => {
                category.classList.remove('drag-over', 'correct-drop');
            });
        }
        
        // æ·»åŠ æ‹–åŠ¨äº‹ä»¶
        function addDragEvents(card) {
            // å¼€å§‹æ‹–åŠ¨
            card.addEventListener('mousedown', startDrag);
            card.addEventListener('touchstart', startDragTouch);
            
            // ç§»åŠ¨è®¾å¤‡è§¦æ‘¸äº‹ä»¶
            function startDragTouch(e) {
                if (!gameState.gameActive) return;
                
                e.preventDefault();
                gameState.draggedCard = card;
                card.classList.add('dragging');
                
                // æ·»åŠ è§¦æ‘¸ç§»åŠ¨å’Œç»“æŸäº‹ä»¶
                document.addEventListener('touchmove', moveDragTouch);
                document.addEventListener('touchend', endDrag);
            }
            
            // æ¡Œé¢è®¾å¤‡é¼ æ ‡äº‹ä»¶
            function startDrag(e) {
                if (!gameState.gameActive) return;
                
                gameState.draggedCard = card;
                card.classList.add('dragging');
                
                // æ·»åŠ é¼ æ ‡ç§»åŠ¨å’Œé‡Šæ”¾äº‹ä»¶
                document.addEventListener('mousemove', moveDrag);
                document.addEventListener('mouseup', endDrag);
            }
        }
        
        // ç§»åŠ¨è®¾å¤‡è§¦æ‘¸ç§»åŠ¨
        function moveDragTouch(e) {
            if (!gameState.draggedCard) return;
            
            e.preventDefault();
            const touch = e.touches[0];
            moveCard(touch.clientX, touch.clientY);
        }
        
        // æ¡Œé¢è®¾å¤‡é¼ æ ‡ç§»åŠ¨
        function moveDrag(e) {
            if (!gameState.draggedCard) return;
            
            moveCard(e.clientX, e.clientY);
        }
        
        // ç§»åŠ¨å¡ç‰‡
        function moveCard(x, y) {
            if (!gameState.draggedCard) return;
            
            // æ›´æ–°å¡ç‰‡ä½ç½®ï¼ˆè·Ÿéšé¼ æ ‡/æ‰‹æŒ‡ï¼‰
            gameState.draggedCard.style.left = `${x - 65}px`;
            gameState.draggedCard.style.top = `${y - 35}px`;
            gameState.draggedCard.style.position = 'fixed';
            gameState.draggedCard.style.zIndex = '1000';
            
            // æ£€æŸ¥æ˜¯å¦åœ¨ç±»åˆ«åŒºåŸŸä¸Šæ–¹
            const categories = document.querySelectorAll('.category');
            categories.forEach(category => {
                const rect = category.getBoundingClientRect();
                const isOver = x >= rect.left && x <= rect.right && y >= rect.top && y <= rect.bottom;
                
                if (isOver) {
                    category.classList.add('drag-over');
                } else {
                    category.classList.remove('drag-over');
                }
            });
        }
        
        // ç»“æŸæ‹–åŠ¨
        function endDrag(e) {
            if (!gameState.draggedCard) return;
            
            // ç§»é™¤æ‹–åŠ¨æ ·å¼
            gameState.draggedCard.classList.remove('dragging');
            
            // æ£€æŸ¥æ˜¯å¦åœ¨ç±»åˆ«åŒºåŸŸä¸Šæ–¹
            const categories = document.querySelectorAll('.category');
            let droppedOnCategory = null;
            
            // è·å–å¡ç‰‡ä½ç½®
            const cardRect = gameState.draggedCard.getBoundingClientRect();
            const cardCenterX = cardRect.left + cardRect.width / 2;
            const cardCenterY = cardRect.top + cardRect.height / 2;
            
            categories.forEach(category => {
                const rect = category.getBoundingClientRect();
                const isOver = cardCenterX >= rect.left && cardCenterX <= rect.right && 
                               cardCenterY >= rect.top && cardCenterY <= rect.bottom;
                
                if (isOver) {
                    droppedOnCategory = category;
                    category.classList.remove('drag-over');
                } else {
                    category.classList.remove('drag-over');
                }
            });
            
            // å¤„ç†æ”¾ç½®
            if (droppedOnCategory) {
                const targetCategory = droppedOnCategory.dataset.category;
                const cardCategories = JSON.parse(gameState.draggedCard.dataset.categories);
                
                // æ£€æŸ¥å¡ç‰‡æ˜¯å¦å·²ç»è¢«æ”¾ç½®è¿‡
                const cardId = gameState.draggedCard.dataset.formula;
                
                if (cardCategories.includes(targetCategory) && !gameState.placedCards[cardId]) {
                    // æ­£ç¡®åˆ†ç±»ä¸”æœªæ”¾ç½®è¿‡
                    handleCorrectClassification(gameState.draggedCard, droppedOnCategory, targetCategory);
                } else if (gameState.placedCards[cardId]) {
                    // å¡ç‰‡å·²ç»è¢«æ”¾ç½®è¿‡
                    showMessage('è¯¥å¡ç‰‡å·²ç»åˆ†ç±»å®Œæˆï¼', 'incorrect');
                    resetCardPosition(gameState.draggedCard);
                    displayRanking();
                } else {
                    // é”™è¯¯åˆ†ç±»
                    handleIncorrectClassification(gameState.draggedCard);
                }
            } else {
                // æœªæ”¾ç½®åœ¨ç±»åˆ«åŒºåŸŸï¼Œè¿”å›åŸå¤„
                resetCardPosition(gameState.draggedCard);
            }
            
            // ç§»é™¤äº‹ä»¶ç›‘å¬å™¨
            document.removeEventListener('mousemove', moveDrag);
            document.removeEventListener('mouseup', endDrag);
            document.removeEventListener('touchmove', moveDragTouch);
            document.removeEventListener('touchend', endDrag);
            
            // é‡ç½®æ‹–åŠ¨å¡ç‰‡
            gameState.draggedCard = null;
        }
        
        // å¤„ç†æ­£ç¡®åˆ†ç±»
        function handleCorrectClassification(card, categoryElement, targetCategory) {
            // è®°å½•å¡ç‰‡å·²æ”¾ç½®
            const cardId = card.dataset.formula;
            gameState.placedCards[cardId] = true;
            
            // å¢åŠ æ­£ç¡®è®¡æ•°
            gameState.correct++;
            gameState.remaining--;
            
            // æ›´æ–°æ˜¾ç¤º
            updateDisplay();
            
            // æ›´æ–°ç±»åˆ«è®¡æ•°
            const countElement = document.getElementById(`count-${targetCategory}`);
            const currentCount = parseInt(countElement.textContent.split('/')[0]) + 1;
            const totalCount = categoryCounts[targetCategory];
            countElement.textContent = `${currentCount}/${totalCount}`;
            
            // æ·»åŠ æ­£ç¡®æ ·å¼
            categoryElement.classList.add('correct-drop');
            
            // æ˜¾ç¤ºæ­£ç¡®æ¶ˆæ¯
            const cardCategories = JSON.parse(card.dataset.categories);
            let message = `æ­£ç¡®ï¼${card.textContent}å±äº${targetCategory}`;
            if (cardCategories.length > 1) {
                message += `ï¼ˆè¯¥ç‰©è´¨ä¹Ÿå¯ä»¥å±äº${cardCategories.filter(c => c !== targetCategory).join('æˆ–')}ï¼‰`;
            }
            showMessage(message, 'correct');
            
            // æ’­æ”¾æ­£ç¡®åŠ¨ç”»å¹¶ç§»é™¤å¡ç‰‡
            card.classList.add('correct');
            setTimeout(() => {
                card.style.display = 'none';
                
                // æ£€æŸ¥æ¸¸æˆæ˜¯å¦å®Œæˆ
                checkGameCompletion();
            }, 600);
        }
        
        // å¤„ç†é”™è¯¯åˆ†ç±»
        function handleIncorrectClassification(card) {
            // å¢åŠ é”™è¯¯è®¡æ•°
            gameState.incorrect++;
            
            // æ›´æ–°æ˜¾ç¤º
            updateDisplay();
            
            // æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯
            showMessage('é”™è¯¯ï¼è¯·é‡æ–°å°è¯•', 'incorrect');
            
            // æ’­æ”¾é”™è¯¯åŠ¨ç”»
            card.classList.add('incorrect');
            
            // é‡ç½®å¡ç‰‡ä½ç½®
            setTimeout(() => {
                card.classList.remove('incorrect');
                resetCardPosition(card);
            }, 500);
        }
        
        // é‡ç½®å¡ç‰‡ä½ç½®
        function resetCardPosition(card) {
            // è¿”å›éšæœºä½ç½®ï¼ˆç¡®ä¿åœ¨åŒºåŸŸå†…ï¼‰
            const areaRect = formulaArea.getBoundingClientRect();
            const areaWidth = areaRect.width - 150;
            const areaHeight = areaRect.height - 100;
            
            const randomLeft = Math.random() * areaWidth;
            const randomTop = Math.random() * areaHeight;
            
            card.style.position = 'absolute';
            card.style.left = `${randomLeft}px`;
            card.style.top = `${randomTop}px`;
            card.style.zIndex = '1';
        }
        
        // æ˜¾ç¤ºæ¶ˆæ¯
        function showMessage(message, type) {
            gameMessageElement.textContent = message;
            gameMessageElement.className = `game-message message-${type}`;
            
            // 3ç§’åéšè—æ¶ˆæ¯
            setTimeout(() => {
                gameMessageElement.className = 'game-message';
            }, 2500);
        }
        
        // æ›´æ–°æ˜¾ç¤º
        function updateDisplay() {
            remainingElement.textContent = gameState.remaining;
            correctElement.textContent = gameState.correct;
            incorrectElement.textContent = gameState.incorrect;
        }
        
        // æ£€æŸ¥æ¸¸æˆæ˜¯å¦å®Œæˆ
        function checkGameCompletion() {
            if (gameState.remaining === 0) {
                endGame();
            }
        }
        
        // å¼€å§‹æ¸¸æˆ
        function startGame() {
            if (gameState.gameActive) return;
            
            gameState.gameActive = true;
            gameState.startTime = Date.now();
            gameState.elapsedTime = 0;
            
            // ç¦ç”¨å¼€å§‹æŒ‰é’®
            startBtn.disabled = true;
            
            // å¯ç”¨æ‰€æœ‰å¡ç‰‡çš„æ‹–åŠ¨
            document.querySelectorAll('.formula-card').forEach(card => {
                card.draggable = true;
            });
            
            // æ˜¾ç¤ºå¼€å§‹æ¶ˆæ¯
            showMessage('æ¸¸æˆå¼€å§‹ï¼å°†åŒ–å­¦å¼æ‹–åŠ¨åˆ°æ­£ç¡®çš„ç±»åˆ«ä¸­', 'correct');
            
            // å¼€å§‹è®¡æ—¶å™¨
            gameState.timerInterval = setInterval(() => {
                gameState.elapsedTime = Date.now() - gameState.startTime;
                updateTimerDisplay();
            }, 10); // æ¯10æ¯«ç§’æ›´æ–°ä¸€æ¬¡
        }
        
        // ç»“æŸæ¸¸æˆ
        function endGame() {
            gameState.gameActive = false;
            
            // æ¸…é™¤è®¡æ—¶å™¨
            if (gameState.timerInterval) {
                clearInterval(gameState.timerInterval);
                gameState.timerInterval = null;
            }
            
            // ç¦ç”¨æ‰€æœ‰å¡ç‰‡çš„æ‹–åŠ¨
            document.querySelectorAll('.formula-card').forEach(card => {
                card.draggable = false;
            });
            
            // è®¡ç®—ç”¨æ—¶ï¼ˆç§’ï¼‰
            const timeInSeconds = gameState.elapsedTime / 1000;
            const minutes = Math.floor(timeInSeconds / 60);
            const seconds = (timeInSeconds % 60).toFixed(2);
            
            // æ˜¾ç¤ºæ¸¸æˆç»“æœ
            let timeString;
            if (minutes > 0) {
                timeString = `${minutes}åˆ†${seconds}ç§’`;
            } else {
                timeString = `${seconds}ç§’`;
            }
            
            gameResultElement.textContent = `ğŸ‰ æ­å–œï¼ä½ å·²å®Œæˆæ‰€æœ‰åˆ†ç±»ï¼ç”¨æ—¶: ${timeString}ï¼Œæ­£ç¡®: ${gameState.correct}ï¼Œé”™è¯¯: ${gameState.incorrect}`;
            gameResultElement.style.display = 'block';
            
            // ä¿å­˜åˆ°æ’è¡Œæ¦œ
            saveToRanking(timeInSeconds);
            
            // æ˜¾ç¤ºæ’è¡Œæ¦œ
            displayRanking();
            
            // æ˜¾ç¤ºå®Œæˆæ¶ˆæ¯
            showMessage(`åˆ†ç±»å®Œæˆï¼ç”¨æ—¶${timeString}`, 'correct');
        }
        
        // ä¿å­˜åˆ°æ’è¡Œæ¦œ
        function saveToRanking(timeInSeconds) {
            const now = new Date();
            const dateString = now.toLocaleDateString('zh-CN');
            
            rankingData.push({
                time: timeInSeconds,
                correct: gameState.correct,
                incorrect: gameState.incorrect,
                date: dateString
            });
            
            // æŒ‰ç”¨æ—¶æ’åºï¼ˆç”¨æ—¶è¶ŠçŸ­æ’åè¶Šé«˜ï¼‰
            rankingData.sort((a, b) => a.time - b.time);
            
            // åªä¿ç•™å‰10å
            if (rankingData.length > 10) {
                rankingData = rankingData.slice(0, 10);
            }
            
            // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
            localStorage.setItem('chemicalClassificationRanking', JSON.stringify(rankingData));
        }
        
        function cleanRanking(){
            localStorage.setItem('chemicalClassificationRanking', null);
        }

        // æ˜¾ç¤ºæ’è¡Œæ¦œ
        function displayRanking() {
            let rankingData = JSON.parse(localStorage.getItem('chemicalClassificationRanking')) || [];

            rankingBodyElement.innerHTML = '';
            
            if(rankingData.length === 0){
                rankingElement.innerHTML = '<h3><i class="fas fa-trophy"></i> æ’è¡Œæ¦œ</h3><p>æš‚æ— è®°å½•ï¼Œå¿«æ¥æŒ‘æˆ˜å§ï¼</p>' ;
            }

            rankingData.forEach((record, index) => {
                const row = document.createElement('tr');
                
                // è®¾ç½®æ’åæ ·å¼
                let rankClass = '';
                if (index === 0) rankClass = 'rank-1';
                else if (index === 1) rankClass = 'rank-2';
                else if (index === 2) rankClass = 'rank-3';
                
                // æ ¼å¼åŒ–æ—¶é—´
                const minutes = Math.floor(record.time / 60);
                const seconds = (record.time % 60).toFixed(2);
                let timeString;
                if (minutes > 0) {
                    timeString = `${minutes}åˆ†${seconds}ç§’`;
                } else {
                    timeString = `${seconds}ç§’`;
                }
                
                row.innerHTML = `
                    <td class="${rankClass}">${index + 1}</td>
                    <td>${timeString}</td>
                    <td>${record.correct}</td>
                    <td>${record.incorrect}</td>
                    <td>${record.date}</td>
                `;
                
                rankingBodyElement.appendChild(row);
            });
            
            rankingElement.style.display = 'block';
        }
        
        // æ›´æ–°è®¡æ—¶å™¨æ˜¾ç¤º
        function updateTimerDisplay() {
            const timeInSeconds = gameState.elapsedTime / 1000;
            const minutes = Math.floor(timeInSeconds / 60);
            const seconds = (timeInSeconds % 60).toFixed(2);
            
            timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.padStart(5, '0')}`;
        }
        
        // äº‹ä»¶ç›‘å¬
        startBtn.addEventListener('click', startGame);
        resetBtn.addEventListener('click', initGame);
        cleanBtn.addEventListener('click', cleanRanking);
        
        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–æ¸¸æˆ
        document.addEventListener('DOMContentLoaded', initGame);
        
        // é˜²æ­¢é»˜è®¤æ‹–æ”¾è¡Œä¸º
        document.addEventListener('dragover', function(e) {
            e.preventDefault();
        });
        
        document.addEventListener('drop', function(e) {
            e.preventDefault();
        });
        
        // çª—å£å¤§å°å˜åŒ–æ—¶é‡æ–°è®¡ç®—å¡ç‰‡ä½ç½®
        window.addEventListener('resize', function() {
            if (!gameState.gameActive) return;
            
            // ç¡®ä¿æ‰€æœ‰å¡ç‰‡éƒ½åœ¨åŒºåŸŸå†…
            document.querySelectorAll('.formula-card:not(.correct)').forEach(card => {
                if (card.style.display !== 'none') {
                    const areaRect = formulaArea.getBoundingClientRect();
                    const cardRect = card.getBoundingClientRect();
                    
                    // æ£€æŸ¥å¡ç‰‡æ˜¯å¦åœ¨åŒºåŸŸå¤–
                    if (cardRect.left < areaRect.left || cardRect.right > areaRect.right ||
                        cardRect.top < areaRect.top || cardRect.bottom > areaRect.bottom) {
                        resetCardPosition(card);
                    }
                }
            });
        });
    </script>
</body>
</html>